<header class="header">
  <div class="header-content">
    <!-- Botão do Menu Hamburguer -->
    <button class="menu-button" (click)="toggleSidenav()">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>

    <!-- Logo -->
    <div class="logo-container">
      <a routerLink="/" (click)="closeSidenav()">
        <img src="assets/img/vanessa_logo.png" alt="Logo Vanessa" class="logo">
      </a>
    </div>

    <!-- Botões de Autenticação -->
    <div class="auth-buttons">
      <!-- Usuário não logado -->
      <ng-container *ngIf="!isLogado">
        <button class="btn-auth btn-login" (click)="irParaLogin()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
            <polyline points="10 17 15 12 10 7"></polyline>
            <line x1="15" y1="12" x2="3" y2="12"></line>
          </svg>
          Login
        </button>
        <button class="btn-auth btn-cadastro" (click)="irParaCadastro()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="8.5" cy="7" r="4"></circle>
            <line x1="20" y1="8" x2="20" y2="14"></line>
            <line x1="23" y1="11" x2="17" y2="11"></line>
          </svg>
          Cadastrar
        </button>
      </ng-container>

      <!-- Usuário logado -->
      <div class="perfil-container" *ngIf="isLogado">
        <a routerLink="/perfil" class="user-info" (click)="closeSidenav()">
          <img *ngIf="avatarUrl" [src]="avatarUrl" alt="Avatar" class="avatar" />
          <svg *ngIf="!avatarUrl" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          <span class="perfil-nome">{{ usuarioLogado?.nome }}</span>
          <span class="perfil-badge" *ngIf="isAdmin">Admin</span>
        </a>
      </div>
    </div>
  </div>
</header>


<!-- Overlay -->
<div class="overlay" [class.active]="isSidenavOpen" (click)="closeSidenav()"></div>

<!-- Sidenav -->
<nav class="sidenav" [class.open]="isSidenavOpen">
  <div class="sidenav-header">
    <h2>Menu</h2>
    <button class="close-button" (click)="closeSidenav()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>

  <ul class="nav-list">
    <!-- Home -->
    <li class="nav-item">
      <a routerLink="/" class="nav-link" (click)="closeSidenav()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        Início
      </a>
    </li>

    <!-- Receitas com submenu -->
    <li class="nav-item">
      <button class="nav-link expandable" (click)="toggleReceitas()">
        <div class="nav-link-content">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
          </svg>
          Receitas
        </div>
        <svg 
          class="expand-icon" 
          [class.expanded]="isReceitasExpanded"
          xmlns="http://www.w3.org/2000/svg" 
          width="16" 
          height="16" 
          viewBox="0 0 24 24" 
          fill="none" 
          stroke="currentColor" 
          stroke-width="2">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </button>

      <!-- Submenu -->
      <ul class="submenu" [class.expanded]="isReceitasExpanded">
        <li class="submenu-item">
          <a routerLink="/receitas/doce" class="submenu-link" (click)="closeSidenav()">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M12 6v6l4 2"></path>
            </svg>
            Doces
          </a>
        </li>
        <li class="submenu-item">
          <a routerLink="/receitas/salgado" class="submenu-link" (click)="closeSidenav()">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M12 6v6l4 2"></path>
            </svg>
            Salgados
          </a>
        </li>
      </ul>
    </li>

    <!-- Timer -->
    <li class="nav-item">
      <a routerLink="/timer" class="nav-link" (click)="closeSidenav()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="13" r="8"></circle>
          <path d="M12 9v4l2 2"></path>
          <path d="M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"></path>
        </svg>
        Timer de Cozinha
      </a>
    </li>

    <!-- Lista de Compras -->
    <li class="nav-item">
      <a routerLink="/listas-compras" class="nav-link" (click)="closeSidenav()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        Lista de Compras
      </a>
    </li>

    <!-- Favoritos - Apenas para usuários logados -->
    <li class="nav-item" *ngIf="isLogado">
      <a routerLink="/favoritos" class="nav-link" (click)="closeSidenav()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
        Favoritos
      </a>
    </li>

    <!-- Histórico - Apenas para usuários logados -->
    <li class="nav-item" *ngIf="isLogado">
      <a routerLink="/historico" class="nav-link" (click)="closeSidenav()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        Histórico
      </a>
    </li>

    <!-- Admin - Apenas para administradores -->
    <li class="nav-item admin-item" *ngIf="isAdmin">
      <a routerLink="/admin/receitas" class="nav-link admin-link" (click)="closeSidenav()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
        </svg>
        Gerenciar Receitas
      </a>
    </li>

    <!-- Logout - Apenas para usuários logados -->
    <li class="nav-item logout-item" *ngIf="isLogado">
      <button class="nav-link logout-link" (click)="logout()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
          <polyline points="16 17 21 12 16 7"></polyline>
          <line x1="21" y1="12" x2="9" y2="12"></line>
        </svg>
        Sair da Conta
      </button>
    </li>
  </ul>
</nav>
